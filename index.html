<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tinker Tech Referrals</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Tinker Tech Referrals</h1>
        
        <label for="fullName">Full Name</label>
        <input type="text" id="fullName" placeholder="e.g. Johnathan Mctavish">

        <label for="workshop">Select Workshop</label>
        <select id="workshop">
            <option value="SD">Software Development</option>
            <option value="AI">AIML</option>
            <option value="MECH">Mechatronics</option>
        </select>
        
        <button onclick="generateCode()">Generate Code</button>
        
        <div id="result-container">
            <div>Your Referral Code:</div>
            <div class="code-display" id="result"></div>
        </div>
    </div>

    <script>
        function generateCode() {
            const rawName = document.getElementById("fullName").value.trim().toUpperCase();
            const workshopCode = document.getElementById("workshop").value;
            
            // NEW: Generate a random number between 1000 and 9999
            const randomNum = Math.floor(1000 + Math.random() * 9000);

            if (!rawName) { alert("Please enter a name."); return; }

            const nameParts = rawName.split(/\s+/);
            let firstNameCode = nameParts[0].substring(0, 4);
            let lastNameCode = "";
            
            if (nameParts.length > 1) {
                lastNameCode = "-" + nameParts[nameParts.length - 1].substring(0, 4);
            }

            // Updated line to use randomNum instead of constant
            const finalCode = `${firstNameCode}${lastNameCode}-${workshopCode}-${randomNum}`;

            document.getElementById("result").innerText = finalCode;
            document.getElementById("result-container").style.display = "block";
            
            // Optional: Click to Copy
            document.getElementById("result").onclick = function() {
                navigator.clipboard.writeText(finalCode);
                alert("Copied: " + finalCode);
            }
        }
    </script>
</body>
</html>